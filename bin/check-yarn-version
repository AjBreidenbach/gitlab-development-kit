#!/usr/bin/env ruby

MINIMAL_VERSION = '1.12'

version_output = ""

begin
  version_output = `yarn --version`
rescue Errno::ENOENT
  abort "Yarn is not installed, please install Yarn #{MINIMAL_VERSION} or higher"
end

abort 'Could not determine version of Yarn' unless $?.success?


expected = Gem::Version.new(MINIMAL_VERSION)
actual = Gem::Version.new(version_output)

if actual < expected
  abort "We've detected that you are using Yarn version #{actual}.\nPlease install Yarn version #{MINIMAL_VERSION} or higher"
end
