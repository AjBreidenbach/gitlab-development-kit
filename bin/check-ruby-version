#!/usr/bin/env ruby

require 'net/http'

gitlab_repo_ruby_version_uri = URI('https://gitlab.com/gitlab-org/gitlab/raw/master/.ruby-version')
gitlab_repo_ruby_version = Net::HTTP.get(gitlab_repo_ruby_version_uri).strip

expected = Gem::Version.new(gitlab_repo_ruby_version)
actual = Gem::Version.new(RUBY_VERSION)

if actual < expected
  abort "We've detected that you are using Ruby version #{actual}.\nPlease install Ruby version #{gitlab_repo_ruby_version} or higher"
end
